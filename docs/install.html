
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Install PySCF &#8212; PySCF</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=92fd9be5" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/css/pyscf-pst.css?v=ed6b5f64" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=dfec817d"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'install';</script>
    <link rel="icon" href="_static/favicon-32x32.png"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo-64x64.png" class="logo__image only-light" alt=""/>
    <script>document.write(`<img src="_static/logo-64x64.png" class="logo__image only-dark" alt=""/>`);</script>
  
  
    <p class="title logo__title">PySCF</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributor/index.html">
    Contributor Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="news.html">
    News
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyscf/pyscf" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contributor/index.html">
    Contributor Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="news.html">
    News
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyscf/pyscf" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Install PySCF</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="install-pyscf">
<span id="installing"></span><h1>Install PySCF<a class="headerlink" href="#install-pyscf" title="Link to this heading">#</a></h1>
<section id="install-with-pip">
<h2>1) Install with <cite>pip</cite><a class="headerlink" href="#install-with-pip" title="Link to this heading">#</a></h2>
<p>This is the recommended way to install PySCF for non-developers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --prefer-binary pyscf
</pre></div>
</div>
<p>The pip package provides a precompiled PySCF code (python wheel) which
works on almost all Linux systems, and most of Mac OS X systems, and
the Ubuntu subsystems on Windows 10. If you already have installed
PySCF via pip, you can upgrade it to the new version with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --upgrade pyscf
</pre></div>
</div>
<p>Some theoretical models developed in recent years are only available in the
pyscf-forge package. To access these modules, you can install the pyscf-forge package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyscf-forge
</pre></div>
</div>
<p>Certain modules are maintained as extensions of PySCF (see also <a class="reference internal" href="#install-extensions">Install extensions</a>).
To install all PySCF functionalities, you can execute the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyscf[all]
</pre></div>
</div>
</section>
<section id="build-from-source-with-pip">
<h2>2) Build from source with <cite>pip</cite><a class="headerlink" href="#build-from-source-with-pip" title="Link to this heading">#</a></h2>
<p>If you’re interested in a new feature, that’s not included in the latest release or you simply
want the latest and greatest PySCF you can build from source using pip.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/pyscf/pyscf
</pre></div>
</div>
<p>To install the features developed on a particular branch use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/pyscf/pyscf@&lt;branch_name&gt;
</pre></div>
</div>
<p>This install method compiles and links C extensions against the
libraries in your system. See <a class="reference internal" href="#compile-c-extensions"><span class="std std-ref">3) Build from source</span></a> for a full
list of prerequisites. If you would like to tune the CMake compilation
parameters, you can set them with the environment variable <cite>CMAKE_CONFIGURE_ARGS</cite>,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export CMAKE_CONFIGURE_ARGS=&quot;-DBUILD_MARCH_NATIVE=ON -DBLA_VENDOR=Intel10_64lp_seq&quot;
</pre></div>
</div>
<p>See <a class="reference internal" href="#cmake-options"><span class="std std-ref">CMake options</span></a> for more details about CMake configuration.</p>
</section>
<section id="build-from-source">
<span id="compile-c-extensions"></span><h2>3) Build from source<a class="headerlink" href="#build-from-source" title="Link to this heading">#</a></h2>
<p>Prerequisites for manual install are</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>C compiler</p></li>
<li><p>C++ compiler (optional, but required for XCFun and some extensions)</p></li>
<li><p>CMake &gt;= 3.10</p></li>
<li><p>Python &gt;= 3.7</p></li>
<li><p>Numpy &gt;= 1.13</p></li>
<li><p>Scipy &gt;= 1.3</p></li>
<li><p>h5py &gt;= 2.7</p></li>
</ul>
</div>
<p>You can download the latest version of PySCF (or the development
branch) from github:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/pyscf/pyscf.git
$ cd pyscf
</pre></div>
</div>
<p>Next, you need to build the C extensions in <code class="file docutils literal notranslate"><span class="pre">pyscf/lib</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd pyscf/lib
$ mkdir build
$ cd build
$ cmake ..
$ make
</pre></div>
</div>
<p>This will automatically download the analytical GTO integral library
<a class="reference external" href="https://github.com/sunqm/libcint.git">libcint</a> and the DFT exchange
correlation functional libraries <a class="reference external" href="http://www.tddft.org/programs/Libxc">Libxc</a> and <a class="reference external" href="https://github.com/dftlibs/xcfun.git">XCFun</a>.  Finally, to allow Python to
find the <cite>pyscf</cite> package, add the top-level <cite>pyscf</cite> directory (not the
<cite>pyscf/pyscf</cite> subdirectory) to <cite>PYTHONPATH</cite>.  For example, if <cite>pyscf</cite>
is installed in <code class="docutils literal notranslate"><span class="pre">/opt</span></code>, you adjust <cite>PYTHONPATH</cite> with something
like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=/opt/pyscf:$PYTHONPATH
</pre></div>
</div>
<p>To ensure that the installation was successful, you can start a Python
shell, and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyscf</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#cmake-options"><span class="std std-ref">CMake options</span></a> for details about CMake configuration.</p>
</section>
<section id="installation-with-conda">
<h2>4) Installation with conda<a class="headerlink" href="#installation-with-conda" title="Link to this heading">#</a></h2>
<p>If you have a <a class="reference external" href="https://conda.io/docs/">Conda</a> (or <a class="reference external" href="https://www.continuum.io/downloads#linux">Anaconda</a>) environment, PySCF
package can be installed from the Conda cloud
(for Linux and Mac OS X systems):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install -c pyscf pyscf
</pre></div>
</div>
<p>Extension modules are not available on the Conda cloud. They should be
installed either with pip, or through the environment variable
<cite>PYSCF_EXT_PATH</cite> (see the section <a class="reference internal" href="#installing-extproj"><span class="std std-ref">Install PySCF extensions</span></a>).</p>
</section>
<section id="installation-on-fedora">
<h2>5) Installation on Fedora<a class="headerlink" href="#installation-on-fedora" title="Link to this heading">#</a></h2>
<p>If you are running Fedora Linux, you can install PySCF as a
distribution package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># dnf install python3-pyscf</span>
</pre></div>
</div>
<p>If you are running on an X86-64 platform, dnf should automatically
install the optimized integral library, qcint, instead of the
cross-platform libcint library.</p>
<p>Extension modules are not available in the Fedora package.</p>
</section>
<section id="pyscf-docker-image">
<h2>6) PySCF docker image<a class="headerlink" href="#pyscf-docker-image" title="Link to this heading">#</a></h2>
<p>The following command starts a container with the jupyter notebook
server that listens for HTTP connections on port 8888:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it -p 8888:8888 pyscf/pyscf:latest
</pre></div>
</div>
<p>Now, you can visit <code class="docutils literal notranslate"><span class="pre">https://localhost:8888</span></code> with your browser to use
PySCF in the notebook.</p>
<p>Another way to use PySCF in a docker container is to start an Ipython
shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it pyscf/pyscf:latest start.sh ipython
</pre></div>
</div>
</section>
</section>
<section id="advanced-build-options">
<h1>Advanced build options<a class="headerlink" href="#advanced-build-options" title="Link to this heading">#</a></h1>
<section id="cmake-options">
<span id="id1"></span><h2>CMake options<a class="headerlink" href="#cmake-options" title="Link to this heading">#</a></h2>
<p>A full build of PySCF may take a long time to finish.
<cite>XCFun</cite> may fail to build if a proper C++ compiler is not available, such as on certain old operating systems.
The CMake options listed below can be used to speed up compilation or omit extensions that fail to compile.
Note:  If both <cite>-DENABLE_LIBXC=OFF</cite> and <cite>-DENABLE_XCFUN=OFF</cite> are set, importing the dft module will lead to an <cite>ImportError</cite>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Flags</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>ENABLE_LIBXC</cite></p></td>
<td><p>ON</p></td>
<td><p>Whether to use <cite>LibXC</cite> library in PySCF. If <cite>-DENABLE_LIBXC=OFF</cite>
is appended to cmake command, <cite>LibXC</cite> will not be compiled.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>ENABLE_XCFUN</cite></p></td>
<td><p>ON</p></td>
<td><p>Whether to use <cite>XCFun</cite> library in PySCF. If <cite>-DENABLE_XCFUN=OFF</cite>
is appended to cmake command, <cite>XCFun</cite> will not be compiled.</p></td>
</tr>
<tr class="row-even"><td><p><cite>BUILD_LIBXC</cite></p></td>
<td><p>ON</p></td>
<td><p>Set it to <cite>OFF</cite> to skip compiling <cite>Libxc</cite>. The dft module
still calls <cite>LibXC</cite> library by default. The dft module will be
linked against the <cite>LibXC</cite> library from an earlier build.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>BUILD_XCFUN</cite></p></td>
<td><p>ON</p></td>
<td><p>Set it to <cite>OFF</cite> to skip compiling <cite>XCFun</cite>. The dft module
will be linked against the <cite>XCFun</cite> library from an earlier build.</p></td>
</tr>
<tr class="row-even"><td><p><cite>BUILD_LIBCINT</cite></p></td>
<td><p>ON</p></td>
<td><p>Set it to <cite>OFF</cite> to skip compiling <cite>libcint</cite>. The integral
library from an earlier build will be used.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>WITH_F12</cite></p></td>
<td><p>ON</p></td>
<td><p>Whether to compile the F12 integrals.</p></td>
</tr>
<tr class="row-even"><td><p><cite>DISABLE_DFT</cite></p></td>
<td><p>OFF</p></td>
<td><p>Set this flag to skip the entire dft module. Neither <cite>LibXC</cite>
nor <cite>XCFun</cite> will be compiled.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>BUILD_MARCH_NATIVE</cite></p></td>
<td><p>OFF</p></td>
<td><p>Whether to let the compiler optimize the code against CPU
architecture</p></td>
</tr>
</tbody>
</table>
</div>
<section id="cmake-config-file">
<h3>CMake config file<a class="headerlink" href="#cmake-config-file" title="Link to this heading">#</a></h3>
<p>CMake options can be saved in a configuration file
<code class="docutils literal notranslate"><span class="pre">pyscf/lib/cmake.arch.inc</span></code>.  The settings in this file will be
automatically loaded and overwrite the default CMake options during
compilation.  For example, you can set <code class="docutils literal notranslate"><span class="pre">CMAKE_C_FLAGS</span></code> in this file
to include advanced compiler optimization flags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="n">CMAKE_C_FLAGS</span> <span class="s2">&quot;$</span><span class="si">{CMAKE_C_FLAGS}</span><span class="s2"> -ffast-math -mtune=native -march=native&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Other settings, variables, and flags can also be set in this file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="n">ENABLE_XCFUN</span> <span class="n">Off</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="n">WITH_F12</span> <span class="n">Off</span><span class="p">)</span>
</pre></div>
</div>
<p>Some examples of platform-specific configurations can be found in
directory <code class="docutils literal notranslate"><span class="pre">pyscf/lib/cmake_user_inc_examples</span></code>.</p>
</section>
</section>
<section id="environment-variables-and-global-configures">
<h2>Environment variables and global configures<a class="headerlink" href="#environment-variables-and-global-configures" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Env variable</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>PYSCF_MAX_MEMORY</cite></p></td>
<td><p>Maximum memory to use in MB</p></td>
</tr>
<tr class="row-odd"><td><p><cite>PYSCF_TMPDIR</cite></p></td>
<td><p>Directory for temporary files</p></td>
</tr>
<tr class="row-even"><td><p><cite>PYSCF_CONFIG_FILE</cite></p></td>
<td><p>File where various PySCF default settings are stored</p></td>
</tr>
<tr class="row-odd"><td><p><cite>PYSCF_EXT_PATH</cite></p></td>
<td><p>Path for finding external extensions</p></td>
</tr>
</tbody>
</table>
</div>
<p><cite>PYSCF_MAX_MEMORY</cite> sets the default maximum memory in MB when creating
<cite>Mole</cite> (or <cite>Cell</cite>) object. It corresponds to the attribute
<cite>max_memory</cite> of <cite>Mole</cite> (or <cite>Cell</cite>) object.</p>
<p>The environment variable <cite>PYSCF_TMPDIR</cite> controls which directory is
used to store intermediate files and temporary data when PySCF is run;
it is also commonly known as the scratch directory. If this
environment variable is not set, the system-wide temporary directory
<cite>TMPDIR</cite> will be used as the temp directory, instead. It is highly
recommended to set this variable to a directory with enough disk
space, as many quantum chemistry methods may consume a huge amount of
temporary storage space. It is equally important that the scratch
directory has fast i/o: for instance, using a network-mounted scratch
disk is often much slower than local disks.</p>
<p><cite>PYSCF_CONFIG_FILE</cite> is a Python file that can be used to predefine and
override several default parameters in the program: you may already
have noticed statements like <cite>getattr(__config__, “FOOBAR”)</cite> many
places in the source code. These global parameters are defined in
<cite>PYSCF_CONFIG_FILE</cite> and loaded when the pyscf module is imported.  By
default, this environment variable points to <cite>~/.pyscf_conf.py</cite>.</p>
<p><cite>PYSCF_EXT_PATH</cite> allows PySCF to find any possible extension
packages. This is documented in detail in <a class="reference internal" href="#installing-extproj"><span class="std std-ref">Install PySCF extensions</span></a>.</p>
</section>
<section id="installation-without-network">
<span id="installing-wo-network"></span><h2>Installation without network<a class="headerlink" href="#installation-without-network" title="Link to this heading">#</a></h2>
<p>In the usual case, all external libraries (libcint, libxc, xcfun) are
downloaded and installed when the C extensions are compiled, thus
requiring network access. In this section, we show how to install the
external libraries without accessing to network. First, you need to
download the libcint, Libxc, and XCFun libraries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/sunqm/libcint.git
$ tar czf libcint.tar.gz libcint

$ wget https://gitlab.com/libxc/libxc/-/archive/6.0.0/libxc-6.0.0.tar.gz

$ wget -O xcfun.tar.gz https://github.com/fishjojo/xcfun/archive/refs/tags/cmake-3.5.tar.gz
</pre></div>
</div>
<p>Assuming <code class="docutils literal notranslate"><span class="pre">/opt</span></code> is the place where these libraries will be installed, these
packages should be compiled with the flags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar xvzf libcint.tar.gz
$ cd libcint
$ mkdir build &amp;&amp; cd build
$ cmake -DWITH_F12=1 -DWITH_RANGE_COULOMB=1 -DWITH_COULOMB_ERF=1 \
    -DCMAKE_INSTALL_PREFIX:PATH=/opt -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
$ make &amp;&amp; make install

$ tar xvzf libxc-6.0.0.tar.gz
$ cd libxc-6.0.0
$ mkdir build &amp;&amp; cd build
$ cmake -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS=1 \
    -DENABLE_FORTRAN=0 -DDISABLE_KXC=0 -DDISABLE_LXC=1 \
    -DCMAKE_INSTALL_PREFIX:PATH=/opt -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
$ make &amp;&amp; make install

$ tar xvzf xcfun.tar.gz
$ cd xcfun-cmake-3.5
$ mkdir build &amp;&amp; cd build
$ cmake -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS=1 -DXCFUN_MAX_ORDER=3 -DXCFUN_ENABLE_TESTS=0 \
    -DCMAKE_INSTALL_PREFIX:PATH=/opt -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
$ make &amp;&amp; make install
</pre></div>
</div>
<p>Next, you can compile PySCF:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd pyscf/pyscf/lib
$ mkdir build &amp;&amp; cd build
$ cmake -DBUILD_LIBCINT=0 -DBUILD_LIBXC=0 -DBUILD_XCFUN=0 -DCMAKE_INSTALL_PREFIX:PATH=/opt ..
$ make
</pre></div>
</div>
<p>Finally, you should update the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment variable so
that the Python interpreter can find your installation of PySCF.</p>
</section>
<section id="using-optimized-blas">
<span id="installing-blas"></span><h2>Using optimized BLAS<a class="headerlink" href="#using-optimized-blas" title="Link to this heading">#</a></h2>
<p>The default installation tries to find the BLAS libraries
automatically. This automated setup script may end up linking the code
to slow versions of BLAS libraries, like the reference NETLIB
implementation. Using an optimized linear algebra library like ATLAS,
BLIS or OpenBLAS may, however, speed up certain parts of PySCF by
orders of magnitudes; speedups by a factor of 1000x over the reference
implementation are not uncommon.</p>
<p>You can compile PySCF against BLAS libraries from other vendors to
improve performance. For example, the Intel Math Kernel Library (MKL)
can provide a 10x speedup in many modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd pyscf/lib/build
$ cmake -DBLA_VENDOR=Intel10_64lp_seq ..
$ make
</pre></div>
</div>
<p>When linking the program to MKL, CMake may have problems to find the
correct MKL libraries for some versions of MKL.  Setting
<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> to include the MKL dynamic libraries can sometimes
help, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export LD_LIBRARY_PATH=/opt/intel/compilers_and_libraries_2018/linux/mkl/lib/intel64:$LD_LIBRARY_PATH
</pre></div>
</div>
<p>If you are using Anaconda as your Python-side platform, you can link
PySCF to the MKL library shipped with Anaconda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export MKLROOT=/path/to/anaconda2
$ export LD_LIBRARY_PATH=$MKLROOT/lib:$LD_LIBRARY_PATH
$ cd pyscf/lib/build
$ cmake -DBLA_VENDOR=Intel10_64lp_seq ..
$ make
</pre></div>
</div>
<p>You can also link to other BLAS libraries by setting <code class="docutils literal notranslate"><span class="pre">BLA_VENDOR</span></code>,
eg <code class="docutils literal notranslate"><span class="pre">BLA_VENDOR=ATLAS</span></code>, <code class="docutils literal notranslate"><span class="pre">BLA_VENDOR=IBMESSL</span></code>,
<code class="docutils literal notranslate"><span class="pre">BLA_VENDOR=OpenBLAS</span></code> (requiring cmake-3.6).  Please refer to the
<a class="reference external" href="http://www.cmake.org/cmake/help/v3.6/module/FindBLAS.html">cmake manual</a> for more
details on the use of the <code class="docutils literal notranslate"><span class="pre">FindBLAS</span></code> macro.</p>
<p>If setting the CMake <code class="docutils literal notranslate"><span class="pre">BLA_VENDOR</span></code> variable does not result in the
right BLAS library being chosen, you can specify the BLAS libraries to
use by hand by setting the <code class="docutils literal notranslate"><span class="pre">BLAS_LIBRARIES</span></code> CMake argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -DBLAS_LIBRARIES=-lopenblaso ..
</pre></div>
</div>
<p>You can also hardcode the libraries you want to use in
<code class="file docutils literal notranslate"><span class="pre">lib/CMakeLists.txt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="n">BLAS_LIBRARIES</span> <span class="s2">&quot;$</span><span class="si">{BLAS_LIBRARIES}</span><span class="s2">;/path/to/mkl/lib/intel64/libmkl_intel_lp64.so&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="n">BLAS_LIBRARIES</span> <span class="s2">&quot;$</span><span class="si">{BLAS_LIBRARIES}</span><span class="s2">;/path/to/mkl/lib/intel64/libmkl_sequential.so&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="n">BLAS_LIBRARIES</span> <span class="s2">&quot;$</span><span class="si">{BLAS_LIBRARIES}</span><span class="s2">;/path/to/mkl/lib/intel64/libmkl_core.so&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="n">BLAS_LIBRARIES</span> <span class="s2">&quot;$</span><span class="si">{BLAS_LIBRARIES}</span><span class="s2">;/path/to/mkl/lib/intel64/libmkl_avx.so&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MKL library may lead to an OSError at runtime:
<code class="docutils literal notranslate"><span class="pre">OSError:</span> <span class="pre">...</span> <span class="pre">mkl/lib/intel64/libmkl_avx.so:</span> <span class="pre">undefined</span> <span class="pre">symbol:</span> <span class="pre">ownLastTriangle_64fc</span></code>
or <code class="docutils literal notranslate"><span class="pre">MKL</span> <span class="pre">FATAL</span> <span class="pre">ERROR:</span> <span class="pre">Cannot</span> <span class="pre">load</span> <span class="pre">libmkl_avx.so</span> <span class="pre">or</span> <span class="pre">libmkl_def.so.</span></code>.
It can be solved by preloading MKL core library with:
<code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LD_PRELOAD=$MKLROOT/lib/intel64/libmkl_avx.so:$MKLROOT/lib/intel64/libmkl_core.so</span></code></p>
</div>
</section>
<section id="using-optimized-integral-library">
<span id="installing-qcint"></span><h2>Using optimized integral library<a class="headerlink" href="#using-optimized-integral-library" title="Link to this heading">#</a></h2>
<p>The default integral library used by PySCF is libcint
(<a class="github reference external" href="https://github.com/sunqm/libcint">sunqm/libcint</a>), which is implemented within a
model that maximizes its compatibility with various high performance
computer systems. On X86-64 platforms, however, libcint has a more
efficient counterpart, Qcint (<a class="github reference external" href="https://github.com/sunqm/qcint">sunqm/qcint</a>) which is
heavily optimized with X86 SIMD instructions (AVX-512/AVX2/AVX/SSE3).
To replace the default libcint library with qcint library, edit the
URL of the integral library in lib/CMakeLists.txt file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ExternalProject_Add</span><span class="p">(</span><span class="n">libcint</span>
   <span class="n">GIT_REPOSITORY</span>
   <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sunqm</span><span class="o">/</span><span class="n">qcint</span><span class="o">.</span><span class="n">git</span>
   <span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="install-pyscf-extensions">
<span id="installing-extproj"></span><h1>Install PySCF extensions<a class="headerlink" href="#install-pyscf-extensions" title="Link to this heading">#</a></h1>
<section id="extension-modules">
<h2>Extension modules<a class="headerlink" href="#extension-modules" title="Link to this heading">#</a></h2>
<p>As of PySCF-2.0, some modules have been moved from the main code trunk
to extension projects hosted at <a class="github reference external" href="https://github.com/pyscf">pyscf</a>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Project</p></th>
<th class="head"><p>URL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cas_ac0</p></td>
<td><p><a class="github reference external" href="https://github.com/CQCL/pyscf-ac0">CQCL/pyscf-ac0</a></p></td>
</tr>
<tr class="row-odd"><td><p>cornell-shci</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/cornell-shci">pyscf/cornell-shci</a></p></td>
</tr>
<tr class="row-even"><td><p>dftd3</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/dftd3">pyscf/dftd3</a></p></td>
</tr>
<tr class="row-odd"><td><p>dmrgscf</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/dmrgscf">pyscf/dmrgscf</a></p></td>
</tr>
<tr class="row-even"><td><p>doci</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/doci">pyscf/doci</a></p></td>
</tr>
<tr class="row-odd"><td><p>fciqmc</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/fciqmc">pyscf/fciqmc</a></p></td>
</tr>
<tr class="row-even"><td><p>icmpspt</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/icmpspt">pyscf/icmpspt</a></p></td>
</tr>
<tr class="row-odd"><td><p>mbd</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/mbd">pyscf/mbd</a></p></td>
</tr>
<tr class="row-even"><td><p>naive-hci</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/naive-hci">pyscf/naive-hci</a></p></td>
</tr>
<tr class="row-odd"><td><p>nao</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/nao">pyscf/nao</a></p></td>
</tr>
<tr class="row-even"><td><p>qsdopt</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/qsdopt">pyscf/qsdopt</a></p></td>
</tr>
<tr class="row-odd"><td><p>rt</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/rt">pyscf/rt</a></p></td>
</tr>
<tr class="row-even"><td><p>semiempirical</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/semiempirical">pyscf/semiempirical</a></p></td>
</tr>
<tr class="row-odd"><td><p>shciscf</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/shciscf">pyscf/shciscf</a></p></td>
</tr>
<tr class="row-even"><td><p>zquatev</p></td>
<td><p><a class="github reference external" href="https://github.com/sunqm/zquatev">sunqm/zquatev</a></p></td>
</tr>
<tr class="row-odd"><td><p>tblis</p></td>
<td><p><a class="github reference external" href="https://github.com/pyscf/pyscf-tblis">pyscf/pyscf-tblis</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="install-extensions">
<h2>Install extensions<a class="headerlink" href="#install-extensions" title="Link to this heading">#</a></h2>
<p>Since PySCF version 2.0, some modules are developed independently; see
<a class="reference internal" href="#installing-extproj"><span class="std std-ref">Install PySCF extensions</span></a>. Individual extension modules (for example
the geometry optimization module) can be installed using pip’s extra
dependency mechanism:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyscf[geomopt]
</pre></div>
</div>
<p>All extension modules can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyscf[all]
</pre></div>
</div>
<p>The extension modules can be found in <cite>https://github.com/pyscf</cite> (see
also <a class="reference internal" href="#installing-extproj"><span class="std std-ref">Install PySCF extensions</span></a>).</p>
</section>
<section id="install-extensions-advanced">
<h2>Install extensions (advanced)<a class="headerlink" href="#install-extensions-advanced" title="Link to this heading">#</a></h2>
<p>Based on the technique of namespace packages specified in <a class="reference external" href="https://www.python.org/dev/peps/pep-0420/">PEP 420</a>, PySCF has developed a
couple of methods to install the extension modules.</p>
<ul>
<li><p>Pip command. For pip version newer than 19.0, projects hosted on
GitHub can be installed on the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/pyscf/semiempirical
</pre></div>
</div>
<p>A particular release on github can be installed with the release URL
you can look up on GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install https://github.com/pyscf/semiempirical/archive/v0.1.0.tar.gz
</pre></div>
</div>
</li>
<li><p>Pip command for local paths. If you wish to load an extension
module developed in a local directory, you can use the local install
mode of pip. Use of a Python virtual environment is recommended to
avoid polluting the system default Python runtime environment; for
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m venv /home/abc/pyscf-local-env
$ source /home/abc/pyscf-local-env/bin/activate
$ git clone https://github.com/pyscf/semiempirical /home/abc/semiempirical
$ pip install -e /home/abc/semiempirical
</pre></div>
</div>
</li>
<li><p>Environment variable <cite>PYSCF_EXT_PATH</cite>. You can place the location of
each extension module (or a file that contains these locations) in
this environment variable. The PySCF library will parse the paths
defined in this environment variable, and load the relevant
submodules. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/pyscf/semiempirical /home/abc/semiempirical
$ git clone https://github.com/pyscf/doci /home/abc/doci
$ git clone https://github.com/pyscf/dftd3 /home/abc/dftd3
$ echo /home/abc/doci &gt; /home/abc/.pyscf_ext_modules
$ echo /home/abc/dftd3 &gt;&gt; /home/abc/.pyscf_ext_modules
$ export PYSCF_EXT_PATH=/home/abc/semiempirical:/home/abc/.pyscf_ext_modules
</pre></div>
</div>
<p>Using this definition of <cite>PYSCF_EXT_PATH</cite>, the three extension
submodules (semiempirical, doci, dftd3) are loaded when PySCF is
imported, and you don’t have to use a Python virtual environment.</p>
</li>
</ul>
<p>Once the extension modules have been correctly installed (with any of
the methods shown above), you can use them as regular submodules
developed inside the pyscf main project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyscf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyscf.semiempirical</span> <span class="kn">import</span> <span class="n">MINDO3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mol</span> <span class="o">=</span> <span class="n">pyscf</span><span class="o">.</span><span class="n">M</span><span class="p">(</span><span class="n">atom</span><span class="o">=</span><span class="s1">&#39;N 0 0 0; N 0 0 1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MINDO</span><span class="p">(</span><span class="n">mol</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="common-examples">
<h2>Common examples<a class="headerlink" href="#common-examples" title="Link to this heading">#</a></h2>
<p>… NAO
… —
… The <code class="xref py py-mod docutils literal notranslate"><span class="pre">nao</span></code> module includes basic functions for numerical atomic
orbitals (NAO) and NAO-based TDDFT methods.  This module was
contributed by Marc Barbry and Peter Koval. More details of <code class="xref py py-mod docutils literal notranslate"><span class="pre">nao</span></code>
can be found in
<a class="github reference external" href="https://github.com/pyscf/nao/blob/master/README.md">pyscf/nao</a>. This module can be
installed with::
…    $ pip install <a class="github reference external" href="https://github.com/pyscf/nao">pyscf/nao</a></p>
<section id="dmrg-solvers">
<h3>DMRG solvers<a class="headerlink" href="#dmrg-solvers" title="Link to this heading">#</a></h3>
<p>Density matrix renormalization group (DMRG) theory is a powerful
method for solving ab initio quantum chemistry problems. PySCF can be
used with three implementations of DMRG: Block
(<a class="reference external" href="https://sanshar.github.io/Block">https://sanshar.github.io/Block</a>), block2
(<a class="reference external" href="https://block2.readthedocs.io/en/latest">https://block2.readthedocs.io/en/latest</a>), and CheMPS2
(<a class="reference external" href="http://sebwouters.github.io/CheMPS2/index.html">http://sebwouters.github.io/CheMPS2/index.html</a>).</p>
<p><a class="reference external" href="https://sanshar.github.io/Block/build.html">Installing Block</a> requires a C++11
compiler.  If C++11 is not supported by your compiler, you can
download the precompiled Block binary from <a class="reference external" href="https://sanshar.github.io/Block/build.html">https://sanshar.github.io/Block/build.html</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">block2</span></code> can be easily installed via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">block2</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">block2-mpi</span></code>,
or <a class="reference external" href="https://block2.readthedocs.io/en/latest/user/installation.html">building from source</a>.</p>
<p>Before using Block or CheMPS2, you need create a configuration file
<code class="docutils literal notranslate"><span class="pre">pyscf/dmrgscf/settings.py</span></code> (as shown by settings.py.example) to
store the path where the DMRG solver was installed.</p>
</section>
<section id="tblis">
<h3>TBLIS<a class="headerlink" href="#tblis" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://github.com/devinamatthews/tblis">TBLIS</a> provides a native
algorithm for performing tensor contraction for arbitrarily
high-dimensional tensors. The native algorithm in TBLIS does not need
to transform tensors into matrices by permutations, then call BLAS for
the the matrix contraction, and back-permute the results. This means
that tensor transposes and data moves are largely avoided by TBLIS. This
leads to speedups in many correlated quantum chemistry methods in PySCF, such as
the coupled cluster methods.
The interface to TBLIS offers an efficient implementation for
<code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.einsum()</span></code> style tensor contraction.  The tblis-einsum
plugin can be enabled with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install pyscf-tblis
</pre></div>
</div>
</section>
</section>
</section>
<section id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">#</a></h1>
<section id="error-command-cmake-failed">
<h2><cite>error: command ‘cmake’ failed</cite><a class="headerlink" href="#error-command-cmake-failed" title="Link to this heading">#</a></h2>
<p>In some cases, users who install PySCF with <cite>pip install pyscf</cite> may see an error like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Building wheels for collected packages: pyscf
  Building wheel for pyscf (setup.py) ... error
  error: subprocess-exited-with-error
  × python setup.py bdist_wheel did not run successfully.
  │ exit code: 1
  ╰─&gt; [7 lines of output]
      scipy&gt;1.1.0 may crash when calling scipy.linalg.eigh. (Issues https://github.com/scipy/scipy/issues/15362 https://github.com/scipy/scipy/issues/16151)
      running bdist_wheel
      running build
      running build_ext
      Configuring extensions
      cmake -S/Users/&lt;user&gt;/personal/codes/chemistry/pyscf/pyscf/lib -Bbuild/temp.macosx-12-x86_64-cpython-310
      error: command &#39;cmake&#39; failed: No such file or directory
      [end of output]
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">pip</span></code> chose not to install a binary wheel and is trying to build from source.
If that’s not your intention, you should install with the command <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--prefer-binary</span> <span class="pre">pyscf</span></code>.
On the other hand, if you are intentionally trying to build from source, you’re missing the required <cite>cmake</cite> program.
See the docs for building from source above and issue <a class="reference external" href="https://github.com/pyscf/pyscf/issues/1684">1684</a> for more details.</p>
</section>
<section id="macos-library-not-loaded">
<h2>MacOS: <cite>Library not loaded</cite><a class="headerlink" href="#macos-library-not-loaded" title="Link to this heading">#</a></h2>
<p>For Mac OS X/macOS, you may get an import error if your OS X/macOS
version is 10.11 or newer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">OSError</span><span class="p">:</span> <span class="n">dlopen</span><span class="p">(</span><span class="n">xxx</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcgto</span><span class="o">.</span><span class="n">dylib</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span> <span class="n">Library</span> <span class="ow">not</span> <span class="n">loaded</span><span class="p">:</span> <span class="n">libcint</span><span class="mf">.3.0</span><span class="o">.</span><span class="n">dylib</span>
<span class="n">Referenced</span> <span class="n">from</span><span class="p">:</span> <span class="n">xxx</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcgto</span><span class="o">.</span><span class="n">dylib</span>
<span class="n">Reason</span><span class="p">:</span> <span class="n">unsafe</span> <span class="n">use</span> <span class="n">of</span> <span class="n">relative</span> <span class="n">rpath</span> <span class="n">libcint</span><span class="mf">.3.0</span><span class="o">.</span><span class="n">dylib</span> <span class="ow">in</span> <span class="n">xxx</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">pyscf</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libcgto</span><span class="o">.</span><span class="n">dylib</span> <span class="k">with</span> <span class="n">restricted</span> <span class="n">binary</span>
</pre></div>
</div>
<p>This is caused by the incorrect RPATH.  The script
<code class="docutils literal notranslate"><span class="pre">pyscf/lib/_runme_to_fix_dylib_osx10.11.sh</span></code> in the <code class="docutils literal notranslate"><span class="pre">pyscf/lib</span></code>
directory can be used to fix this problem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">pyscf</span><span class="o">/</span><span class="n">lib</span>
<span class="n">sh</span> <span class="n">_runme_to_fix_dylib_osx10</span><span class="mf">.11</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>RPATH has been built in the dynamic library.  This may cause library
loading error on some systems.  You can run
<code class="docutils literal notranslate"><span class="pre">pyscf/lib/_runme_to_remove_rpath.sh</span></code> to remove the rpath code
from the library head.  Another workaround is to set
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_SKIP_RPATH=1</span></code> and <code class="docutils literal notranslate"><span class="pre">-DCMAKE_MACOSX_RPATH=0</span></code> in the CMake
command line.  When the RPATH was removed, you need to add
<code class="docutils literal notranslate"><span class="pre">pyscf/lib</span></code> and <code class="docutils literal notranslate"><span class="pre">pyscf/lib/deps/lib</span></code> in <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>.</p>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Install PySCF</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-with-pip">1) Install with <cite>pip</cite></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-from-source-with-pip">2) Build from source with <cite>pip</cite></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-from-source">3) Build from source</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-with-conda">4) Installation with conda</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-on-fedora">5) Installation on Fedora</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pyscf-docker-image">6) PySCF docker image</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-build-options">Advanced build options</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-options">CMake options</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-config-file">CMake config file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-variables-and-global-configures">Environment variables and global configures</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-without-network">Installation without network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-optimized-blas">Using optimized BLAS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-optimized-integral-library">Using optimized integral library</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#install-pyscf-extensions">Install PySCF extensions</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extension-modules">Extension modules</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-extensions">Install extensions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-extensions-advanced">Install extensions (advanced)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-examples">Common examples</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dmrg-solvers">DMRG solvers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tblis">TBLIS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#error-command-cmake-failed"><cite>error: command ‘cmake’ failed</cite></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#macos-library-not-loaded">MacOS: <cite>Library not loaded</cite></a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/pyscf/pyscf.github.io/edit/master/source/install.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, The PySCF Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>